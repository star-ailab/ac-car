import multiprocessing
import subprocess
import os
import random

def calc_square(number):
    print('Square:' , number * number)
    result = number * number
    print(result)
def calc_quad(number):
    print('Quad:' , number * number * number * number)
    result = number * number * number * number
if __name__ == "__main__":
    number = 7
    result = None
    p1 = multiprocessing.Process(target=calc_square, args=(number,))
    p2 = multiprocessing.Process(target=calc_quad, args=(number,))
    p1.start()
    p2.start()
    p1.join()
    p2.join()
    
    # Wont print because processes run using their own memory location                     
    print(result)
    
    
    options = ['--force', '--overlay=copy']
    options += ['--compress-exports={}'.format(random.randint(0, 1))]
    options += ['--compress-icons={}'.format(random.randint(0, 3))]
    options += ['--compress-resources={}'.format(random.randint(0, 1))]
    options += ['--strip-relocs={}'.format(random.randint(0, 1))]
    

    
    
    tmpfilename = "/home/eb/WSPY/rlkit/gym-malware/gym_malware/envs/utils/samples/0058e905a637bc3c60ae628040af2fd3f37c946d99cd35d086c80c38e5fbe326"
    
    with open(os.devnull, 'w') as DEVNULL:
            retcode = subprocess.call(
                ['/home/eb/WSPY/rlkit/gym-malware/gym_malware/envs/controls/UPX/upx'] + options + [tmpfilename, '-o', tmpfilename + '_packed'], stdout=DEVNULL, stderr=DEVNULL)
            
        
            
            